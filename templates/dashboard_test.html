<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        .loading { color: blue; }
    </style>
</head>
<body>
    <h1>Dashboard Puzzle Test</h1>
    
    <div class="test-section">
        <h2>API Test</h2>
        <button onclick="testPuzzleAPI()">Test Puzzle API</button>
        <div id="apiResult"></div>
    </div>
    
    <div class="test-section">
        <h2>Dashboard Iframe Test</h2>
        <iframe id="dashboardFrame" src="/dashboard" width="100%" height="600px" style="border: 1px solid #ccc;"></iframe>
    </div>
    
    <script>
        function testPuzzleAPI() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.innerHTML = '<div class="loading">Testing puzzle API...</div>';
            
            fetch('/api/dashboard/puzzle')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('API Response:', data);
                    resultDiv.innerHTML = `
                        <div class="success">✓ API working!</div>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                })
                .catch(error => {
                    console.error('API Error:', error);
                    resultDiv.innerHTML = `<div class="error">✗ API Error: ${error.message}</div>`;
                });
        }
        
        // Test API on page load
        window.addEventListener('load', function() {
            testPuzzleAPI();
        });
    </script>
</body>
</html>
